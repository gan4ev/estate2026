---
export const prerender = false;
import { getDictionary } from '../../lib/i18n.js';
const db = Astro.locals.runtime?.env?.DB;
const adminLang = Astro.cookies.get('admin_lang')?.value || 'en';
const dict = await getDictionary(db, adminLang) || {};
const t = (key: string) => dict[key] || key;
const error = Astro.url.searchParams.get('error');
---
<!DOCTYPE html>
<html lang={adminLang}>
<head>
    <meta charset="UTF-8">
    <title>{t('admin.sign_in')} | Estate 2026</title>
    {/* ... styles ... */}
    <style>
        body { 
          font-family: system-ui, -apple-system, sans-serif; 
          background: #f4f4f5; 
          display: flex; 
          justify-content: center; 
          align-items: center; 
          height: 100vh; 
          margin: 0; 
        }
        .card { 
          background: white; 
          padding: 2.5rem; 
          border-radius: 12px; 
          box-shadow: 0 4px 6px rgba(0,0,0,0.05); 
          width: 100%; 
          max-width: 360px; 
        }
        .form-group { margin-bottom: 1.5rem; }
        label { display: block; margin-bottom: 0.5rem; font-weight: 500; font-size: 0.875rem;}
        input { 
          width: 100%; 
          padding: 0.75rem; 
          border: 1px solid #d4d4d8; 
          border-radius: 6px; 
          box-sizing: border-box; 
          font-size: 1rem;
        }
        button { 
          width: 100%; 
          padding: 0.75rem; 
          background: #18181b; 
          color: white; 
          border: none; 
          border-radius: 6px; 
          cursor: pointer; 
          font-weight: 600; 
          font-size: 1rem;
          transition: background 0.2s;
        }
        button:hover { background: #3f3f46; }
        .error { color: #dc2626; font-size: 0.875rem; margin-bottom: 1rem; padding: 0.5rem; background: #fef2f2; border-radius: 4px;}
    </style>
</head>
<body>
    <div class="card">
        <h2 style="margin-top: 0; text-align: center;">Estate 2026 Admin</h2>
        <p style="color: #71717a; font-size: 0.875rem; margin-bottom: 1.5rem; text-align: center;">
            Please log in to manage your listings.
        </p>
        
        {error && <div class="error">{error}</div>}

        <form method="POST" action="/api/admin/login">
            <div class="form-group">
                <label for="email">{t('admin.email') || 'Email'}</label>
                <input type="email" id="email" name="email" required placeholder="admin@example.com">
            </div>
            <div class="form-group">
                <label for="password">{t('admin.password') || 'Password'}</label>
                <input type="password" id="password" name="password" required placeholder="••••••••">
            </div>
            <button type="submit">{t('admin.sign_in')}</button>
        </form>
    </div>
</body>
</html>
